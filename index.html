<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>US Civics Study App</title>

<style>
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #0d1b2a, #1b263b);
  color: white;
  min-height: 100vh;
}

/* FULL SCREEN LAYOUT */
.screen {
  width: 100%;
  min-height: 100vh;
  padding: 80px 10%;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

h1 {
  font-size: 64px;
  margin-bottom: 50px;
}

h2 {
  font-size: 42px;
  margin-bottom: 40px;
}

.question {
  font-size: 36px;
  margin-bottom: 40px;
  max-width: 1200px;
  line-height: 1.4;
}

.answer-list {
  font-size: 24px;
  line-height: 1.6;
}

button {
  background: #ffd60a;
  border: none;
  padding: 18px 30px;
  margin: 10px 15px 0 0;
  border-radius: 16px;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s ease;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(255,214,10,0.4);
}

.choice {
  background: white;
  color: black;
  padding: 24px;
  border-radius: 20px;
  margin-bottom: 20px;
  font-size: 22px;
  cursor: pointer;
  transition: 0.2s ease;
}

.choice:hover {
  transform: scale(1.02);
}

.correct { background: #2ecc71; color: white; }
.wrong { background: #e74c3c; color: white; }

.progress-container {
  background: #333;
  height: 16px;
  border-radius: 12px;
  margin-bottom: 30px;
  max-width: 1200px;
}

.progress-bar {
  background: #ffd60a;
  height: 100%;
  width: 0%;
  border-radius: 12px;
  transition: width 0.3s ease;
}

.hidden {
  display: none;
}

/* MOBILE */
@media (max-width: 768px) {
  .screen { padding: 40px 6%; }
  h1 { font-size: 36px; }
  h2 { font-size: 28px; }
  .question { font-size: 22px; }
  .choice { font-size: 18px; }
}
</style>
</head>
<body>

<!-- HOME -->
<div id="home" class="screen">
  <h1>US Civics Study App</h1>
  <div>
    <button onclick="startStudy()">Study</button>
    <button onclick="startQuiz()">Quiz</button>
  </div>
</div>

<!-- STUDY -->
<div id="study" class="screen hidden">
  <h2>Study Mode</h2>
  <div class="question" id="studyQuestion"></div>
  <div class="answer-list" id="studyAnswers"></div>
  <div>
    <button onclick="nextStudy()">Next</button>
    <button onclick="goHome()">Home</button>
  </div>
</div>

<!-- QUIZ -->
<div id="quiz" class="screen hidden">
  <h2>Quiz Mode</h2>
  <div id="progressText"></div>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="question" id="quizQuestion"></div>
  <div id="choices"></div>
  <div>
    <button onclick="nextQuiz()">Next</button>
    <button onclick="endQuiz()">End Quiz</button>
  </div>
</div>

<!-- RESULT -->
<div id="result" class="screen hidden">
  <h2 id="scoreText"></h2>
  <div>
    <button onclick="startQuiz()">Retake Quiz</button>
    <button onclick="goHome()">Home</button>
  </div>
</div>

<script src="questions.js"></script>
<script>

let studyIndex = 0;
let quizQuestions = [];
let quizIndex = 0;
let score = 0;

function switchScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function goHome(){
  switchScreen("home");
}

function startStudy(){
  studyIndex = 0;
  switchScreen("study");
  showStudy();
}

function showStudy(){
  let q = questions[studyIndex];
  document.getElementById("studyQuestion").innerText =
    (studyIndex+1)+". "+q.question;
  document.getElementById("studyAnswers").innerHTML =
    "<strong>Answer:</strong><br>"+q.answers.join("<br>");
}

function nextStudy(){
  studyIndex++;
  if(studyIndex >= questions.length) studyIndex = 0;
  showStudy();
}

function startQuiz(){
  quizQuestions = shuffle([...questions]).slice(0,20);
  quizIndex = 0;
  score = 0;
  switchScreen("quiz");
  showQuiz();
}

function showQuiz(){

  let q = quizQuestions[quizIndex];
  document.getElementById("quizQuestion").innerText = q.question;

  document.getElementById("progressText").innerText =
    "Question "+(quizIndex+1)+" of 20";

  document.getElementById("progressBar").style.width =
    ((quizIndex)/20)*100+"%";

  let correct = q.answers[0];

  let wrongPool = [];
  questions.forEach(item=>{
    if(item.answers[0] !== correct){
      wrongPool.push(item.answers[0]);
    }
  });

  wrongPool = shuffle(wrongPool).slice(0,3);
  let finalChoices = shuffle([correct,...wrongPool]);

  let choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";

  finalChoices.forEach(choice=>{
    let div = document.createElement("div");
    div.className = "choice";
    div.innerText = choice;

    div.onclick = ()=>{
      document.querySelectorAll(".choice").forEach(c=>{
        if(c.innerText === correct) c.classList.add("correct");
        else c.classList.add("wrong");
        c.onclick = null;
      });
      if(choice === correct) score++;
    };

    choicesDiv.appendChild(div);
  });
}

function nextQuiz(){
  quizIndex++;
  if(quizIndex >= 20){
    document.getElementById("progressBar").style.width="100%";
    document.getElementById("scoreText").innerText =
      "Your Score: "+score+" / 20";
    switchScreen("result");
  } else {
    showQuiz();
  }
}

function endQuiz(){
  switchScreen("home");
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

</script>
</body>
</html>
